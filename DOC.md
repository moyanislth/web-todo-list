# TODO List 项目说明文档

## 1. 技术选型
- **编程语言**：JavaScript (Node.js)，理由：前端生态丰富，Next.js支持SSR/SSG，开发速度快，适合快速原型到生产。
- **框架/库**：Next.js (React-based)，理由：内置路由、热重载和优化，结合Tailwind CSS实现响应式UI；React Hooks管理状态，简单高效。
- **数据库/存储**：localStorage，理由：纯前端、无服务器依赖，支持离线持久化（5MB上限），适合单用户Todo场景。
- 替代方案对比：不用MongoDB（需后端/云服务，增加复杂性）；不用IndexedDB（数据简单，localStorage够用且API简洁）。

## 2. 项目结构设计
- **整体架构说明：**

  纯前端单页应用（SPA），Next.js App Router处理路由；

  状态通过自定义Hooks统一管理；组件层（UI）与Hooks（逻辑）分离，便于测试/复用。

  没有后端，所有数据在浏览器localStorage。  

- **目录结构示例：**  
  
  ```text
  src/
    app/
    	layout.js
      page.js          # 主页组件
    components/
      Header.js        # 头部（计数/按钮）
      TodoItem.js      # 单项Todo UI
      TodoList.js      # 列表渲染
      AddTodo.js       # 添加/编辑模态
      SearchBar.js     # 搜索输入
    hooks/
      useTodos.js      # 核心状态/操作
      useDataPersistence.js # 导入/导出
      useDragSort.js   # 拖拽逻辑
  ```
  
- **模块职责说明：**

  components专注UI渲染（props驱动）；

  hooks封装业务逻辑（状态、持久化、拖拽）；

  app/page.js协调整体。  

## 3. 需求细节与决策
- **描述是否必填**：描述可选（允许空字符串），标题必填（添加/编辑时校验trim()后非空）。
- **已完成的任务在 UI 中如何显示**：列表分“待完成/已完成”组，done项灰色+删除线；toggleTodo切换状态并排序（done置底）。
- **任务排序逻辑**：默认按done状态分组（未完成在上）；支持同组内拖拽重排（HTML5 Drag API，防跨组）。
- **扩展功能设计思路**：导入/导出用FileReader/Blob（JSON备份）；若加云同步，可换Firebase Realtime DB（替换localStorage hook）。

## 4. AI 使用说明
- **是否使用 AI 工具**：是的，使用grok 、chatgpt辅助完成项目。

- **使用 AI 的环节**：

  - 代码片段生成：几乎所有代码均是ai辅助完成
  - Bug定位：出现不理解报错时使用ai定位原因和尝试修复
  - 文档初稿编写：No.但是该文档有经过ai润色

- **AI 输出如何修改**：viber coding，尽可能少的修改ai产出代码。仅在必要处如需使用'use client'，页面大纲布局等细微处补足ai未意识到的运行细节等等

- **其他**：

  > 项目开发流程如下：
  >
  > 1. **启动项目**：实现一个Todo List应用，作为起点。
  > 2. **需求解读与方向选择**：分析需求，决定采用Web应用方向。
  > 3. **用户视角规划**：从用户角度考虑便捷性和易用性，撰写用户故事，分析基础功能，并简单构想产品想要达成的效果（快速记录、独立管理）。
  > 4. **设计参考**：从设计角度参考iQOO手机的原子笔记App，确定整体效果和交互。
  > 5. **用户需求聚焦**：确认用户需要一个随手易用的待办列表，避免花哨或不必要的设计。
  > 6. **技术栈选型**：选择轻量级MVP方案，使用React + JavaScript（简单项目JS够用且简洁，因此拒绝TypeScript）。初步设想：用Cookie区分用户 + 数据库存储身份和todo列表。
  > 7. **前端MVP搭建**：先实现基础页面布局，包括头部、搜索栏、列表和添加模态。
  > 8. **核心功能开发**：实现相关函数和方法（增删改查、搜索过滤）。
  > 9. **排序功能实现**：参考原子笔记，尝试添加滑动排序效果（拖拽重排）。
  > 10. **数据持久化迭代**：尝试持久化方案，发现localStorage适合便利的待办列表，切换使用（无需服务器，支持离线）。
  > 11. **初步完成与优化**：至此，简单待办列表小有所成。通过深度体验，发现用户体验问题（如画面位置不稳定、待办项描述观感不好），修复bug并优化UI。
  > 12. **增强数据迁移**：考虑到数据仅本地存储，新增导入/导出功能，以JSON文件形式备份/恢复。
  > 13. **最终收尾**：优先用户体验，不添加无用功能。至此，简洁易用的网页版待办列表完成，可本地部署或使用他人部署的网站，均有良好体验。

## 5. 运行与测试方式
- **本地运行方式**：
  1. npm install（安装Next.js/Tailwind依赖）。
  2. npm run dev（开发模式，localhost:3000）。
  3. 生产：npm run build && npm start。
- **已测试过的环境**：Node.js v22.14.0，Chrome/Edge最新版，Windows。
- **已知问题与不足**：拖拽在触屏移动端需优化；搜索仅标题；无多用户隔离（localStorage浏览器级）。

## 6. 总结与反思
- **如果有更多时间改进**：不设置随机颜色而是将分类和颜色进行关联；考虑浏览器指纹和cookie为用户分配身份、用户身份与todoList数据使用轻量数据库存入服务器提供持久支持。
- **最大亮点**：localStorage+拖拽的“即开即用”体验——用户无需注册，数据存于本地，开箱即用，用户隔离，程序使用流畅。即便是轻量应用，亦提供数据迁移功能，数据备份有保障。
